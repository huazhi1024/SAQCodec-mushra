<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>MUSHRA æ‰“åˆ†ç•Œé¢</title>
  <style>
    body {
      font-family: 'Helvetica Neue', Arial, sans-serif;
      margin: 0;
      padding: 20px;
      background-color: #f9fafb;
      color: #333;
    }
    .container {
      display: flex;
      max-width: 1400px;
      margin: 0 auto;
      gap: 20px;
    }
    .left-panel {
      flex: 0 0 300px;
      position: sticky;
      top: 20px;
      height: fit-content;
    }
    .right-panel {
      flex: 1;
    }
    h1, h2 {
      text-align: center;
      margin-bottom: 10px;
    }
    .instructions {
      background: #fff;
      border-radius: 8px;
      padding: 15px;
      margin-bottom: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      font-size: 14px;
      line-height: 1.5;
    }
    table.score-table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
      font-size: 14px;
      background: #fff;
      box-shadow: 0 2px 8px rgba(0,0,0,0.05);
      border-radius: 8px;
      overflow: hidden;
    }
    table th, table td {
      border: 1px solid #e0e0e0;
      padding: 8px 10px;
      text-align: center;
    }
    table th {
      background-color: #f5f5f5;
      font-weight: 600;
    }
    .group-control {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 15px;
      margin: 15px 0;
    }
    .group-control button {
      padding: 8px 20px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      background-color: #007bff;
      color: white;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .group-control button:hover {
      background-color: #0056b3;
    }
    .group-control button:disabled {
      background-color: #cccccc;
      cursor: not-allowed;
    }
    .group-info {
      font-size: 15px;
      font-weight: 600;
      color: #444;
      min-width: 120px;
      text-align: center;
    }
    .group {
      display: none;
      margin-bottom: 20px;
    }
    .active {
      display: block;
    }
    input[type="number"] {
      width: 60px;
      padding: 6px;
      border: 1px solid #ddd;
      border-radius: 4px;
      text-align: center;
      font-size: 14px;
    }
    input[type="number"]:focus {
      border-color: #007bff;
      outline: none;
    }
    audio {
      width: 200px;
      height: 32px;
    }
    .progress {
      text-align: center;
      margin: 10px 0;
      font-weight: bold;
      color: #555;
    }
    textarea {
      width: 100%;
      height: 200px;
      margin-top: 15px;
      padding: 10px;
      font-size: 14px;
      border-radius: 8px;
      border: 1px solid #ddd;
      background: #fff;
      resize: vertical;
    }
    .result-buttons {
      text-align: center;
      margin-top: 15px;
      display: flex;
      justify-content: center;
      gap: 10px;
    }
    .result-buttons button {
      padding: 8px 16px;
      font-size: 14px;
      border: none;
      border-radius: 6px;
      color: white;
      cursor: pointer;
      transition: background-color 0.2s;
    }
    .collect-btn {
      background-color: #28a745;
    }
    .collect-btn:hover {
      background-color: #218838;
    }
    .download-btn {
      background-color: #17a2b8;
    }
    .download-btn:hover {
      background-color: #138496;
    }
    .clear-btn {
      background-color: #dc3545;
    }
    .clear-btn:hover {
      background-color: #c82333;
    }
    .rating-scale {
      margin-top: 10px;
      font-size: 13px;
      line-height: 1.4;
    }
    .rating-scale p {
      margin: 5px 0;
      padding-left: 10px;
      border-left: 3px solid;
    }
    .rating-scale p:nth-child(1) { border-color: #28a745; }
    .rating-scale p:nth-child(2) { border-color: #5cb85c; }
    .rating-scale p:nth-child(3) { border-color: #ffc107; }
    .rating-scale p:nth-child(4) { border-color: #fd7e14; }
    .rating-scale p:nth-child(5) { border-color: #dc3545; }

    /* æ–°å¢çš„æ ·å¼ */
    .missing-scores {
    color: #dc3545;
    font-weight: bold;
    margin-top: 10px;
    }
    .highlight-missing {
    background-color: #fff3f3;
    }
    .missing-score-input {
    border-color: #dc3545 !important;
    }
    /* æ–°å¢çš„æ ·å¼ */
  </style>
</head>
<body>


  <!-- è¿™é‡Œæ˜¯é¡µé¢çš„æ­£å¼å†…å®¹ -->
<div class="container">
  <!-- å·¦ä¾§å›ºå®šè¯„åˆ†è§„åˆ™é¢æ¿ -->
  <div class="left-panel">
    <h1>MUSHRA æµ‹è¯•</h1>
    
    <div class="instructions">
      <h2>æ‰“åˆ†è¯´æ˜</h2>
      <!-- <p>è¯·æ ¹æ®<span style="color: red; font-weight: bold;">æ¯ä¸ªéŸ³é¢‘ä¸å‚è€ƒéŸ³é¢‘çš„éŸ³è´¨å·®å¼‚</span>ï¼ˆä»å†…å®¹ã€éŸ³è‰²ã€éŸµå¾‹ã€å“åº¦å’Œå™ªå£°å‡ ä¸ªè§’åº¦æ¯”è¾ƒï¼‰è¿›è¡Œ 0â€“100 åˆ†çš„è¯„åˆ†ï¼š</p> -->

      
      <p>è¯·æ ¹æ®<strong style="color: red;">æ¯ä¸ªéŸ³é¢‘ä¸å‚è€ƒéŸ³é¢‘çš„éŸ³è´¨å·®å¼‚</strong>ï¼ˆä»
        <span style="color: blue;">å†…å®¹</span>ã€
        <span style="color: blue;">éŸ³è‰²</span>ã€
        <span style="color: blue;">éŸµå¾‹</span>ã€
        <span style="color: blue;">å“åº¦</span>å’Œ
        <span style="color: blue;">å™ªå£°</span>ï¼‰5ä¸ªè§’åº¦æ¯”è¾ƒè¿›è¡Œ 0â€“100 åˆ†çš„è¯„åˆ†ï¼š</p>
        
      <div class="rating-scale">
        <p><b>85â€“100</b>ï¼šå‡ ä¹é€æ˜ï¼ˆExcellentï¼‰ï¼Œä¸å‚è€ƒå‡ ä¹æ— å·®åˆ«</p>
        <p><b>70â€“85</b>ï¼šè‰¯å¥½ï¼Œè½»å¾®å·®åˆ«</p>
        <p><b>50â€“70</b>ï¼šä¸€èˆ¬ï¼Œæ˜æ˜¾ä¸‹é™</p>
        <p><b>20â€“50</b>ï¼šå·®ï¼Œæœ‰ä¸¥é‡å¤±çœŸ</p>
        <p><b>0â€“20</b>ï¼šéå¸¸å·®ï¼Œæåº¦åˆºè€³æˆ–æ— æ³•æ¥å—</p>
      </div>
      
      <p><strong>æ³¨æ„ï¼šå¯ä»¥åå¤æ’­æ”¾éŸ³é¢‘è¿›è¡Œæ¯”å¯¹ï¼Œä»”ç»†å¬è¾¨åå†æ‰“åˆ†</strong>ã€‚</p>  
    </div>
  </div>

  <!-- å³ä¾§ä¸»è¦å†…å®¹åŒºåŸŸ -->
  <div class="right-panel">
    <div class="group-control">
      <button id="prev-group" disabled>ä¸Šä¸€ç»„</button>
      <div class="group-info">ç¬¬ <span id="current-group">1</span> ç»„ / å…± <span id="total-groups">15</span> ç»„</div>
      <button id="next-group">ä¸‹ä¸€ç»„</button>
    </div>

    <div id="groups">
      <!-- åŠ¨æ€ç”Ÿæˆç»„å†…å®¹ -->
    </div>

    <div class="progress" id="overall-progress"></div>

    <h2>è¯„åˆ†ç»“æœ</h2>
    <textarea id="results" readonly placeholder="ç‚¹å‡»ã€æ”¶é›†æ‰“åˆ†ã€‘æŒ‰é’®ï¼Œä¼šç”Ÿæˆæ–‡æœ¬"></textarea>

    <div class="result-buttons">
      <button class="collect-btn" onclick="collectScores()">æ”¶é›†æ‰“åˆ†</button>
      <button class="download-btn" onclick="downloadScores()">ä¿å­˜æ‰“åˆ†æ–‡ä»¶</button>
      <button class="clear-btn" onclick="clearScores()">æ¸…ç©ºæ‰“åˆ†</button>
    </div>
  </div>
</div>

<script>
  const totalGroups = 24; //è¿™é‡Œæ˜¯è®¾ç½®ç»„æ•°çš„
  const modelsPerGroup = 10;
  let currentGroupIndex = 0;

  const groupsContainer = document.getElementById('groups');
  document.getElementById('total-groups').textContent = totalGroups;

  // ç”Ÿæˆç»„
const audioGroups = [
  
  
  // ////////////////~1000bps//////////////////////////////
  {
    groupName: "Group1 (Bitrate: ~1000bps)", // (~300bps)
    refAudio: "audio/GT/GT_testAditi-snips-test-288.wav",
    refSubtitle: "What is the forecast for starting at 3 a.m. in Dubults for wrong weather?", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/1k/EC1k_testAditi-snips-test-288.wav" },
      { id: 2, path: "audio/recon/TiCodec/1k/TC1k_testAditi-snips-test-288.wav" },
      { id: 3, path: "audio/recon/DAC/1k/DAC1k_testAditi-snips-test-288.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/1.25k/SC1.25k_testAditi-snips-test-288.wav" },
      { id: 5, path: "audio/recon/Ours/0.97k/Ours0.97k_testAditi-snips-test-288.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_testAditi-snips-test-288.wav" },
      { id: 7, path: "audio/GT/GT_testAditi-snips-test-288.wav"}, //hidden reference
      { id: 8, path: "audio/recon/HC/1k/HC1k_testAditi-snips-test-288.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group2 (Bitrate: ~1000bps)", // (~300bps)
    refAudio: "audio/GT/GT_testAditi-snips-test-531.wav",
    refSubtitle: "Look for the television show me the prince", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/1k/EC1k_testAditi-snips-test-531.wav" },
      { id: 2, path: "audio/recon/TiCodec/1k/TC1k_testAditi-snips-test-531.wav" },
      { id: 3, path: "audio/recon/DAC/1k/DAC1k_testAditi-snips-test-531.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/1.25k/SC1.25k_testAditi-snips-test-531.wav" },
      { id: 5, path: "audio/recon/Ours/0.97k/Ours0.97k_testAditi-snips-test-531.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_testAditi-snips-test-531.wav" },
      { id: 7, path: "audio/GT/GT_testAditi-snips-test-531.wav"}, //hidden reference
      { id: 8, path: "audio/recon/HC/1k/HC1k_testAditi-snips-test-531.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group3 (Bitrate: ~1000bps)", // (~300bps)
    refAudio: "audio/GT/GT_testAditi-snips-test-580.wav",
    refSubtitle: "Please find me the journal of the british astronomical association movie.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/1k/EC1k_testAditi-snips-test-580.wav" },
      { id: 2, path: "audio/recon/TiCodec/1k/TC1k_testAditi-snips-test-580.wav" },
      { id: 3, path: "audio/recon/DAC/1k/DAC1k_testAditi-snips-test-580.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/1.25k/SC1.25k_testAditi-snips-test-580.wav" },
      { id: 5, path: "audio/recon/Ours/0.97k/Ours0.97k_testAditi-snips-test-580.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_testAditi-snips-test-580.wav" },
      { id: 7, path: "audio/GT/GT_testAditi-snips-test-580.wav"}, //hidden reference
      { id: 8, path: "audio/recon/HC/1k/HC1k_testAditi-snips-test-580.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group4 (Bitrate: ~1000bps)", // (~300bps)
    refAudio: "audio/GT/GT_test_clean_1320-122612-0007.wav",
    refSubtitle: "Chingachgook had caught the look, and motioning with his hand, he bade him speak.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/1k/EC1k_test_clean_1320-122612-0007.wav" },
      { id: 2, path: "audio/recon/TiCodec/1k/TC1k_test_clean_1320-122612-0007.wav" },
      { id: 3, path: "audio/recon/DAC/1k/DAC1k_test_clean_1320-122612-0007.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/1.25k/SC1.25k_test_clean_1320-122612-0007.wav" },
      { id: 5, path: "audio/recon/Ours/0.97k/Ours0.97k_test_clean_1320-122612-0007.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_test_clean_1320-122612-0007.wav" },
      { id: 7, path: "audio/GT/GT_test_clean_1320-122612-0007.wav"}, //hidden reference
      { id: 8, path: "audio/recon/HC/1k/HC1k_test_clean_1320-122612-0007.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group5 (Bitrate: ~1000bps)", // (~300bps)
    refAudio: "audio/GT/GT_test_clean_7729-102255-0036.wav",
    refSubtitle: "He planted a company before the hotel and demanded a surrender of the arms belonging to the Free State Military Companies.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/1k/EC1k_test_clean_7729-102255-0036.wav" },
      { id: 2, path: "audio/recon/TiCodec/1k/TC1k_test_clean_7729-102255-0036.wav" },
      { id: 3, path: "audio/recon/DAC/1k/DAC1k_test_clean_7729-102255-0036.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/1.25k/SC1.25k_test_clean_7729-102255-0036.wav" },
      { id: 5, path: "audio/recon/Ours/0.97k/Ours0.97k_test_clean_7729-102255-0036.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_test_clean_7729-102255-0036.wav" },
      { id: 7, path: "audio/GT/GT_test_clean_7729-102255-0036.wav"}, //hidden reference
      { id: 8, path: "audio/recon/HC/1k/HC1k_test_clean_7729-102255-0036.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group6 (Bitrate: ~1000bps)", // (~300bps)
    refAudio: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav",
    refSubtitle: "Could you increase the heating?", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/1k/EC1k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 2, path: "audio/recon/TiCodec/1k/TC1k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 3, path: "audio/recon/DAC/1k/DAC1k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/1.25k/SC1.25k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 5, path: "audio/recon/Ours/0.97k/Ours0.97k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 7, path: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav"}, //hidden reference
      { id: 8, path: "audio/recon/HC/1k/HC1k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group7 (Bitrate: ~1000bps)", // (~300bps)
    refAudio: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav",
    refSubtitle: "Okay, now switch the main language to Korean.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/1k/EC1k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 2, path: "audio/recon/TiCodec/1k/TC1k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 3, path: "audio/recon/DAC/1k/DAC1k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/1.25k/SC1.25k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 5, path: "audio/recon/Ours/0.97k/Ours0.97k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 7, path: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav"}, //hidden reference
      { id: 8, path: "audio/recon/HC/1k/HC1k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group8 (Bitrate: ~1000bps)", // (~300bps)
    refAudio: "audio/GT/GT_260-123286-0028.wav",
    refSubtitle: "Its jaw is enormous and according to naturalists it is armed with no less than one hundred and eighty two teeth.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/1k/EC1k_260-123286-0028.flac" },
      { id: 2, path: "audio/recon/TiCodec/1k/TC1k_260-123286-0028.flac" },
      { id: 3, path: "audio/recon/DAC/1k/DAC1k_260-123286-0028.flac" },
      { id: 4, path: "audio/recon/SemantiCodec/1.25k/SC1.25k_260-123286-0028.flac" },
      { id: 5, path: "audio/recon/Ours/0.97k/Ours0.97k_260-123286-0028.flac" },
      { id: 6, path: "audio/speex/4000bps/GT_260-123286-0028.wav" },
      { id: 7, path: "audio/GT/GT_260-123286-0028.wav"}, //hidden reference
      { id: 8, path: "audio/recon/HC/1k/HC1k_260-123286-0028.flac" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

// ////////////////~500bps//////////////////////////////
{
    groupName: "Group9 (Bitrate: ~500bps)", // (~300bps)
    refAudio: "audio/GT/GT_testAditi-snips-test-288.wav",
    refSubtitle: "What is the forecast for starting at 3 a.m. in Dubults for wrong weather?", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/0.5k/EC0.5k_testAditi-snips-test-288.wav" },
      { id: 2, path: "audio/recon/TiCodec/0.5k/TC0.5k_testAditi-snips-test-288.wav" },
      { id: 3, path: "audio/recon/DAC/0.5k/DAC0.5k_testAditi-snips-test-288.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/0.63k/SC0.63k_testAditi-snips-test-288.wav" },
      { id: 5, path: "audio/recon/Ours/0.47k/Ours0.47k_testAditi-snips-test-288.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_testAditi-snips-test-288.wav" },
      { id: 7, path: "audio/GT/GT_testAditi-snips-test-288.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group10 (Bitrate: ~500bps)", // (~300bps)
    refAudio: "audio/GT/GT_testAditi-snips-test-531.wav",
    refSubtitle: "Look for the television show me the prince", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/0.5k/EC0.5k_testAditi-snips-test-531.wav" },
      { id: 2, path: "audio/recon/TiCodec/0.5k/TC0.5k_testAditi-snips-test-531.wav" },
      { id: 3, path: "audio/recon/DAC/0.5k/DAC0.5k_testAditi-snips-test-531.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/0.63k/SC0.63k_testAditi-snips-test-531.wav" },
      { id: 5, path: "audio/recon/Ours/0.47k/Ours0.47k_testAditi-snips-test-531.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_testAditi-snips-test-531.wav" },
      { id: 7, path: "audio/GT/GT_testAditi-snips-test-531.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group11 (Bitrate: ~500bps)", // (~300bps)
    refAudio: "audio/GT/GT_testAditi-snips-test-580.wav",
    refSubtitle: "Please find me the journal of the british astronomical association movie.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/0.5k/EC0.5k_testAditi-snips-test-580.wav" },
      { id: 2, path: "audio/recon/TiCodec/0.5k/TC0.5k_testAditi-snips-test-580.wav" },
      { id: 3, path: "audio/recon/DAC/0.5k/DAC0.5k_testAditi-snips-test-580.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/0.63k/SC0.63k_testAditi-snips-test-580.wav" },
      { id: 5, path: "audio/recon/Ours/0.47k/Ours0.47k_testAditi-snips-test-580.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_testAditi-snips-test-580.wav" },
      { id: 7, path: "audio/GT/GT_testAditi-snips-test-580.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group12 (Bitrate: ~500bps)", // (~300bps)
    refAudio: "audio/GT/GT_test_clean_1320-122612-0007.wav",
    refSubtitle: "Chingachgook had caught the look, and motioning with his hand, he bade him speak.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/0.5k/EC0.5k_test_clean_1320-122612-0007.wav" },
      { id: 2, path: "audio/recon/TiCodec/0.5k/TC0.5k_test_clean_1320-122612-0007.wav" },
      { id: 3, path: "audio/recon/DAC/0.5k/DAC0.5k_test_clean_1320-122612-0007.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/0.63k/SC0.63k_test_clean_1320-122612-0007.wav" },
      { id: 5, path: "audio/recon/Ours/0.47k/Ours0.47k_test_clean_1320-122612-0007.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_test_clean_1320-122612-0007.wav" },
      { id: 7, path: "audio/GT/GT_test_clean_1320-122612-0007.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group13 (Bitrate: ~500bps)", // (~300bps)
    refAudio: "audio/GT/GT_test_clean_7729-102255-0036.wav",
    refSubtitle: "He planted a company before the hotel and demanded a surrender of the arms belonging to the Free State Military Companies.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/0.5k/EC0.5k_test_clean_7729-102255-0036.wav" },
      { id: 2, path: "audio/recon/TiCodec/0.5k/TC0.5k_test_clean_7729-102255-0036.wav" },
      { id: 3, path: "audio/recon/DAC/0.5k/DAC0.5k_test_clean_7729-102255-0036.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/0.63k/SC0.63k_test_clean_7729-102255-0036.wav" },
      { id: 5, path: "audio/recon/Ours/0.47k/Ours0.47k_test_clean_7729-102255-0036.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_test_clean_7729-102255-0036.wav" },
      { id: 7, path: "audio/GT/GT_test_clean_7729-102255-0036.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group14 (Bitrate: ~500bps)", // (~300bps)
    refAudio: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav",
    refSubtitle: "Could you increase the heating?", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/0.5k/EC0.5k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 2, path: "audio/recon/TiCodec/0.5k/TC0.5k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 3, path: "audio/recon/DAC/0.5k/DAC0.5k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/0.63k/SC0.63k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 5, path: "audio/recon/Ours/0.47k/Ours0.47k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 7, path: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group15 (Bitrate: ~500bps)", // (~300bps)
    refAudio: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav",
    refSubtitle: "Okay, now switch the main language to Korean.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/0.5k/EC0.5k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 2, path: "audio/recon/TiCodec/0.5k/TC0.5k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 3, path: "audio/recon/DAC/0.5k/DAC0.5k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 4, path: "audio/recon/SemantiCodec/0.63k/SC0.63k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 5, path: "audio/recon/Ours/0.47k/Ours0.47k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 6, path: "audio/speex/4000bps/GT_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 7, path: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group16 (Bitrate: ~500bps)", // (~300bps)
    refAudio: "audio/GT/GT_260-123286-0028.wav",
    refSubtitle: "Its jaw is enormous and according to naturalists it is armed with no less than one hundred and eighty two teeth.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/EnCodec/0.5k/EC0.5k_260-123286-0028.flac" },
      { id: 2, path: "audio/recon/TiCodec/0.5k/TC0.5k_260-123286-0028.flac" },
      { id: 3, path: "audio/recon/DAC/0.5k/DAC0.5k_260-123286-0028.flac" },
      { id: 4, path: "audio/recon/SemantiCodec/0.63k/SC0.63k_260-123286-0028.flac" },
      { id: 5, path: "audio/recon/Ours/0.47k/Ours0.47k_260-123286-0028.flac" },
      { id: 6, path: "audio/speex/4000bps/GT_260-123286-0028.wav" },
      { id: 7, path: "audio/GT/GT_260-123286-0028.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },


  {
    groupName: "Group17 (Bitrate: ~300bps)", // (~300bps)
    refAudio: "audio/GT/GT_testAditi-snips-test-288.wav",
    refSubtitle: "What is the forecast for starting at 3 a.m. in Dubults for wrong weather?", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/SemantiCodec/0.31k/SC0.31k_testAditi-snips-test-288.wav" },
      { id: 2, path: "audio/recon/Ours/0.3k/Ours0.3k_testAditi-snips-test-288.wav" },
      { id: 3, path: "audio/recon/SemantiCodec/0.35k/SC0.35k_testAditi-snips-test-288.wav" },
      { id: 4, path: "audio/recon/Ours/0.35k/Ours0.35k_testAditi-snips-test-288.wav" },
      { id: 5, path: "audio/speex/4000bps/GT_testAditi-snips-test-288.wav" },
      { id: 6, path: "audio/GT/GT_testAditi-snips-test-288.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group18 (Bitrate: ~300bps)", // (~300bps)
    refAudio: "audio/GT/GT_testAditi-snips-test-531.wav",
    refSubtitle: "Look for the television show me the prince", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/SemantiCodec/0.31k/SC0.31k_testAditi-snips-test-531.wav" },
      { id: 2, path: "audio/recon/Ours/0.3k/Ours0.3k_testAditi-snips-test-531.wav" },
      { id: 3, path: "audio/recon/SemantiCodec/0.35k/SC0.35k_testAditi-snips-test-531.wav" },
      { id: 4, path: "audio/recon/Ours/0.35k/Ours0.35k_testAditi-snips-test-531.wav" },
      { id: 5, path: "audio/speex/4000bps/GT_testAditi-snips-test-531.wav" },
      { id: 6, path: "audio/GT/GT_testAditi-snips-test-531.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group19 (Bitrate: ~300bps)", // (~300bps)
    refAudio: "audio/GT/GT_testAditi-snips-test-580.wav",
    refSubtitle: "Please find me the journal of the british astronomical association movie.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/SemantiCodec/0.31k/SC0.31k_testAditi-snips-test-580.wav" },
      { id: 2, path: "audio/recon/Ours/0.3k/Ours0.3k_testAditi-snips-test-580.wav" },
      { id: 3, path: "audio/recon/SemantiCodec/0.35k/SC0.35k_testAditi-snips-test-580.wav" },
      { id: 4, path: "audio/recon/Ours/0.35k/Ours0.35k_testAditi-snips-test-580.wav" },
      { id: 5, path: "audio/speex/4000bps/GT_testAditi-snips-test-580.wav" },
      { id: 6, path: "audio/GT/GT_testAditi-snips-test-580.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group20 (Bitrate: ~300bps)", // (~300bps)
    refAudio: "audio/GT/GT_test_clean_1320-122612-0007.wav",
    refSubtitle: "Chingachgook had caught the look, and motioning with his hand, he bade him speak.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/SemantiCodec/0.31k/SC0.31k_test_clean_1320-122612-0007.wav" },
      { id: 2, path: "audio/recon/Ours/0.3k/Ours0.3k_test_clean_1320-122612-0007.wav" },
      { id: 3, path: "audio/recon/SemantiCodec/0.35k/SC0.35k_test_clean_1320-122612-0007.wav" },
      { id: 4, path: "audio/recon/Ours/0.35k/Ours0.35k_test_clean_1320-122612-0007.wav" },
      { id: 5, path: "audio/speex/4000bps/GT_test_clean_1320-122612-0007.wav" },
      { id: 6, path: "audio/GT/GT_test_clean_1320-122612-0007.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },
  
  {
    groupName: "Group21 (Bitrate: ~300bps)", // (~300bps)
    refAudio: "audio/GT/GT_test_clean_7729-102255-0036.wav",
    refSubtitle: "He planted a company before the hotel and demanded a surrender of the arms belonging to the Free State Military Companies.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/SemantiCodec/0.31k/SC0.31k_test_clean_7729-102255-0036.wav" },
      { id: 2, path: "audio/recon/Ours/0.3k/Ours0.3k_test_clean_7729-102255-0036.wav" },
      { id: 3, path: "audio/recon/SemantiCodec/0.35k/SC0.35k_test_clean_7729-102255-0036.wav" },
      { id: 4, path: "audio/recon/Ours/0.35k/Ours0.35k_test_clean_7729-102255-0036.wav" },
      { id: 5, path: "audio/speex/4000bps/GT_test_clean_7729-102255-0036.wav" },
      { id: 6, path: "audio/GT/GT_test_clean_7729-102255-0036.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group22 (Bitrate: ~300bps)", // (~300bps)
    refAudio: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav",
    refSubtitle: "Could you increase the heating?", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/SemantiCodec/0.31k/SC0.31k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 2, path: "audio/recon/Ours/0.3k/Ours0.3k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 3, path: "audio/recon/SemantiCodec/0.35k/SC0.35k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 4, path: "audio/recon/Ours/0.35k/Ours0.35k_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 5, path: "audio/speex/4000bps/GT_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      { id: 6, path: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_1f3fba10-4632-11e9-bc65-55b32b211b66.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group23 (Bitrate: ~300bps)", // (~300bps)
    refAudio: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav",
    refSubtitle: "Okay, now switch the main language to Korean.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/SemantiCodec/0.31k/SC0.31k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 2, path: "audio/recon/Ours/0.3k/Ours0.3k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 3, path: "audio/recon/SemantiCodec/0.35k/SC0.35k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 4, path: "audio/recon/Ours/0.35k/Ours0.35k_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 5, path: "audio/speex/4000bps/GT_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      { id: 6, path: "audio/GT/GT_wavs_speakers_7NqqnAOPVVSKnxyv_e3bd7690-4630-11e9-bc65-55b32b211b66.wav" },
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },

  {
    groupName: "Group24 (Bitrate: ~300bps)", // (~300bps)
    refAudio: "audio/GT/GT_260-123286-0028.wav",
    refSubtitle: "Its jaw is enormous and according to naturalists it is armed with no less than one hundred and eighty two teeth.", // æ–°å¢å­—å¹•å­—æ®µ
    models: [
      { id: 1, path: "audio/recon/SemantiCodec/0.31k/SC0.31k_260-123286-0028.flac" },
      { id: 2, path: "audio/recon/Ours/0.3k/Ours0.3k_260-123286-0028.flac" },
      { id: 3, path: "audio/recon/SemantiCodec/0.35k/SC0.35k_260-123286-0028.flac" },
      { id: 4, path: "audio/recon/Ours/0.35k/Ours0.35k_260-123286-0028.flac" },
      { id: 5, path: "audio/speex/4000bps/GT_260-123286-0028.wav" },
      { id: 6, path: "audio/GT/GT_260-123286-0028.wav"},
      // æ·»åŠ æ›´å¤šæ¨¡å‹éŸ³é¢‘...
    ]
  },
  
];

// ç”Ÿæˆç»„
audioGroups.forEach((group, index) => {
  const groupDiv = document.createElement('div');
  groupDiv.className = 'group' + (index === 0 ? ' active' : '');

  const title = document.createElement('h2');
  title.textContent = group.groupName;
  groupDiv.appendChild(title);

  const table = document.createElement('table');
  table.className = 'score-table';
  const thead = document.createElement('thead');
  thead.innerHTML = `
    <tr>
      <th width="10%">ç¼–å·</th>
      <th width="60%">éŸ³é¢‘æ’­æ”¾</th>
      <th width="30%">æ‰“åˆ† (0-100)</th>
    </tr>
  `;
  table.appendChild(thead);

  const tbody = document.createElement('tbody');

  // å‚è€ƒéŸ³é¢‘
  const refRow = document.createElement('tr');
  refRow.innerHTML = `
    <td><b>å‚è€ƒ</b></td>
    <td colspan="2">
      <audio controls src="${group.refAudio}"></audio>
      <div class="subtitle">${group.refSubtitle}</div>  
      </td>
  `;
  tbody.appendChild(refRow);



  // æ¨¡å‹éŸ³é¢‘
  group.models.forEach(model => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${model.id}</td>
      <td><audio controls src="${model.path}"></audio></td>
      <td><input type="number" min="0" max="100" data-group="${index + 1}" data-model="model${model.id}"></td>
    `;
    tbody.appendChild(row);
  });

  table.appendChild(tbody);
  groupDiv.appendChild(table);
  groupsContainer.appendChild(groupDiv);
});

  ////////////////////////////////////////////

  function showGroup(index) {
    const groups = document.querySelectorAll('.group');
    groups.forEach((g, i) => {
      g.classList.toggle('active', i === index);
    });
    updateOverallProgress();
    updateGroupControls();
  }

  function updateGroupControls() {
    document.getElementById('prev-group').disabled = currentGroupIndex === 0;
    document.getElementById('next-group').disabled = currentGroupIndex === totalGroups - 1;
    document.getElementById('current-group').textContent = currentGroupIndex + 1;
  }

  document.getElementById('prev-group').addEventListener('click', () => {
    if (currentGroupIndex > 0) {
      currentGroupIndex--;
      showGroup(currentGroupIndex);
    }
  });

  document.getElementById('next-group').addEventListener('click', () => {
    if (currentGroupIndex < totalGroups - 1) {
      currentGroupIndex++;
      showGroup(currentGroupIndex);
    }
  });

  function updateOverallProgress() {
    document.getElementById('overall-progress').textContent = `å½“å‰ç»„ ${currentGroupIndex + 1}/${totalGroups}`;
  }
//   
// æ£€æŸ¥æ˜¯å¦æœ‰æœªæ‰“åˆ†çš„é¡¹ç›®
function checkMissingScores() {
  const inputs = document.querySelectorAll('input[type="number"]');
  let missingScores = {};
  
  inputs.forEach(input => {
    const group = input.dataset.group;
    const model = input.dataset.model;
    const value = input.value;
    
    if (value === "" || isNaN(value)) {
      if (!missingScores[group]) {
        missingScores[group] = [];
      }
      missingScores[group].push(model);
      
      // é«˜äº®æ˜¾ç¤ºæœªæ‰“åˆ†çš„è¾“å…¥æ¡†
      input.classList.add('missing-score-input');
      input.parentElement.parentElement.classList.add('highlight-missing');
    } else {
      // ç§»é™¤é«˜äº®
      input.classList.remove('missing-score-input');
      input.parentElement.parentElement.classList.remove('highlight-missing');
    }
  });
  
  return missingScores;
}

// æ˜¾ç¤ºæœªæ‰“åˆ†æç¤º
function showMissingScoresAlert(missingScores) {
  let alertMessage = "ä»¥ä¸‹é¡¹ç›®æœªæ‰“åˆ†ï¼Œè¯·å®Œæˆæ‰€æœ‰æ‰“åˆ†åå†ä¿å­˜ï¼š\n\n";
  
  for (const group in missingScores) {
    alertMessage += `Group ${group}:\n`;
    missingScores[group].forEach(model => {
      alertMessage += `  - ${model}\n`;
    });
    alertMessage += "\n";
  }
  
  // åˆ›å»ºæç¤ºå…ƒç´ 
  const alertDiv = document.createElement('div');
  alertDiv.className = 'missing-scores';
  alertDiv.textContent = "è¯·å®Œæˆæ‰€æœ‰æ‰“åˆ†åå†ä¿å­˜ï¼ˆçº¢è‰²é«˜äº®æ˜¾ç¤ºæœªæ‰“åˆ†é¡¹ï¼‰";
  
  const existingAlert = document.querySelector('.missing-scores');
  if (existingAlert) {
    existingAlert.replaceWith(alertDiv);
  } else {
    document.querySelector('.result-buttons').before(alertDiv);
  }
  
  // æ»šåŠ¨åˆ°ç¬¬ä¸€ä¸ªæœªæ‰“åˆ†çš„é¡¹ç›®
  const firstMissing = document.querySelector('.missing-score-input');
  if (firstMissing) {
    firstMissing.scrollIntoView({ behavior: 'smooth', block: 'center' });
    firstMissing.focus();
  }
  
  return false;
}
// 

  function updateProgress(group) {
    const inputs = document.querySelectorAll(`input[data-group="${group}"]`);
    let filled = 0;
    inputs.forEach(input => {
      if (input.value !== "") filled++;
    });
  }

  function saveScoresToStorage() {
    const inputs = document.querySelectorAll('input[type="number"]');
    let scores = {};
    inputs.forEach(input => {
      const group = input.dataset.group;
      const model = input.dataset.model;
      const value = input.value;
      if (!scores[group]) scores[group] = {};
      scores[group][model] = value;
    });
    localStorage.setItem('mushraScores', JSON.stringify(scores));
  }

  function loadScoresFromStorage() {
    const saved = localStorage.getItem('mushraScores');
    if (saved) {
      const scores = JSON.parse(saved);
      for (const group in scores) {
        for (const model in scores[group]) {
          const input = document.querySelector(`input[data-group="${group}"][data-model="${model}"]`);
          if (input) {
            input.value = scores[group][model];
          }
        }
      }
    }
  }

////////////////////////////////////////////////////////
//   document.addEventListener('input', (e) => {
//     if (e.target.matches('input[type="number"]')) {
//       const group = e.target.dataset.group;
//       updateProgress(group);
//       saveScoresToStorage();
//     }
//   });
/////////////////////////////////////////////////////////
// åœ¨è¾“å…¥æ—¶ç§»é™¤é«˜äº®
document.addEventListener('input', (e) => {
  if (e.target.matches('input[type="number"]')) {
    const group = e.target.dataset.group;
    updateProgress(group);
    saveScoresToStorage();
    
    // ç§»é™¤é«˜äº®
    e.target.classList.remove('missing-score-input');
    e.target.parentElement.parentElement.classList.remove('highlight-missing');
    
    // å¦‚æœæ²¡æœ‰æœªæ‰“åˆ†çš„é¡¹ç›®ï¼Œç§»é™¤æç¤º
    const missingScores = checkMissingScores();
    if (Object.keys(missingScores).length === 0) {
      const existingAlert = document.querySelector('.missing-scores');
      if (existingAlert) {
        existingAlert.remove();
      }
    }
  }
});





function collectScores() {
  const missingScores = checkMissingScores();
  
  if (Object.keys(missingScores).length > 0) {
    return showMissingScoresAlert(missingScores);
  }
  
  const inputs = document.querySelectorAll('input[type="number"]');
  let results = {};

  inputs.forEach(input => {
    const group = input.dataset.group;
    const model = input.dataset.model;
    const score = input.value;

    if (!results[`Group ${group}`]) {
      results[`Group ${group}`] = {};
    }
    results[`Group ${group}`][model] = score;
  });

  let resultText = "";
  for (const [group, models] of Object.entries(results)) {
    resultText += `${group}:\n`;
    for (const [model, score] of Object.entries(models)) {
      resultText += `  ${model}: ${score}\n`;
    }
    resultText += '\n';
  }

  document.getElementById('results').value = resultText;
  
  // ç§»é™¤æœªæ‰“åˆ†æç¤ºï¼ˆå¦‚æœæœ‰ï¼‰
  const existingAlert = document.querySelector('.missing-scores');
  if (existingAlert) {
    existingAlert.remove();
  }
     // âœ… å¦‚æœéƒ½æ‰“å®Œåˆ†ï¼Œæ˜¾ç¤ºæ„Ÿè°¢æŠ½å¥–å¼¹çª—
     showThankYou();
  return true;
}



// ä¿®æ”¹åçš„downloadScoreså‡½æ•°
function downloadScores() {
  const missingScores = checkMissingScores();
  
  if (Object.keys(missingScores).length > 0) {
    return showMissingScoresAlert(missingScores);
  }
  
  collectScores();
  const text = document.getElementById('results').value;
  const blob = new Blob([text], { type: "text/plain" });
  const link = document.createElement("a");
  link.href = URL.createObjectURL(blob);
  link.download = "MUSHRA_Scores.txt";
  link.click();
  return true;
}
///////////////////////////////////////////////////////////////////////////////

// ä¿®æ”¹åçš„clearScoreså‡½æ•°
function clearScores() {
  if (confirm("ç¡®å®šè¦æ¸…ç©ºæ‰€æœ‰å·²æ‰“åˆ†çš„æ•°æ®å—ï¼Ÿ")) {
    localStorage.removeItem('mushraScores');
    document.querySelectorAll('input[type="number"]').forEach(input => {
      input.value = '';
      input.classList.remove('missing-score-input');
      input.parentElement.parentElement.classList.remove('highlight-missing');
    });
    document.getElementById('results').value = '';
    
    // ç§»é™¤æœªæ‰“åˆ†æç¤ºï¼ˆå¦‚æœæœ‰ï¼‰
    const existingAlert = document.querySelector('.missing-scores');
    if (existingAlert) {
      existingAlert.remove();
    }
  }
}
////////////////////////////////////////////////////////



  window.onload = () => {
    loadScoresFromStorage();
    updateOverallProgress();
    updateGroupControls();
  }
</script>
<!-- start-æŠ½å¥– -->
 <!-- æ„Ÿè°¢æŠ½å¥–å¼¹çª— -->
<div id="thank-you-modal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); z-index: 1000; justify-content: center; align-items: center; color: white;">
  <div style="background-color: #fff; padding: 30px; border-radius: 10px; max-width: 500px; text-align: center; color: #333;">
    <h2 style="color: #007bff;">æ„Ÿè°¢å‚ä¸æµ‹è¯•ï¼</h2>
    <p>æ‚¨å·²å®Œæˆæ‰€æœ‰è¯„åˆ†ä»»åŠ¡ï¼Œå¯ä»¥å‚ä¸æŠ½å¥–æ´»åŠ¨</p>
    
    <div id="gift-result" style="margin: 20px 0; font-size: 18px; min-height: 50px;">
      <button onclick="drawGift()" style="padding: 10px 20px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">
        ç‚¹å‡»æŠ½å¥–
      </button>
    </div>
    
    <div id="gift-list" style="display: none; margin-top: 20px;">
      <h3>å¥–å“æ¸…å•</h3>
      <ul style="text-align: left; list-style-type: none; padding: 0;">
        <li>ğŸ èŒ¶é¢œæ‚¦è‰²/éœ¸ç‹èŒ¶å§¬</li>
        <li>ğŸ äº”å…ƒçº¢åŒ…</li>
        <li>ğŸ èŠ±ç”Ÿ/ç“œå­/ä¹äº‹è–¯ç‰‡</li>
        <li>ğŸ ç²¾ç¾ç¬”è®°æœ¬</li>
        <li>ğŸ USBå°é£æ‰‡</li>
      </ul>
    </div>
    
    <button onclick="closeThankYou()" style="margin-top: 20px; padding: 8px 15px; background-color: #dc3545; color: white; border: none; border-radius: 5px; cursor: pointer;">
      å…³é—­
    </button>
  </div>
</div>

<script>
function showThankYou() {
  document.getElementById('thank-you-modal').style.display = 'flex';
}

function closeThankYou() {
  document.getElementById('thank-you-modal').style.display = 'none';
  document.getElementById('gift-result').innerHTML = `
    <button onclick="drawGift()" style="padding: 10px 20px; background-color: #28a745; color: white; border: none; border-radius: 5px; cursor: pointer;">
      ç‚¹å‡»æŠ½å¥–
    </button>`;
  document.getElementById('gift-list').style.display = 'none';
}

function drawGift() {
  const gifts = [
    "èŒ¶é¢œæ‚¦è‰²/éœ¸ç‹èŒ¶å§¬",
    "èŠ±ç”Ÿ/ç“œå­/ä¹äº‹è–¯ç‰‡",
    "ç²¾ç¾ç¬”è®°æœ¬",
    "äº”å…ƒçº¢åŒ…",
    "USBå°é£æ‰‡"
  ];
  
  let count = 0;
  const interval = setInterval(() => {
    document.getElementById('gift-result').innerHTML = `æŠ½å¥–ä¸­: ${gifts[count % gifts.length]}`;
    count++;
    if(count > 15) {
      clearInterval(interval);
      const result = gifts[Math.floor(Math.random() * gifts.length)];
      document.getElementById('gift-result').innerHTML = `æ­å–œè·å¾—: <strong style="color: #ff5722;">${result}</strong>`;
      document.getElementById('gift-list').style.display = 'block';
    }
  }, 100);
}
</script>

 <!-- end-æŠ½å¥– -->
</body>
</html>